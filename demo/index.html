<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Scoped Custom Element Registries</title>
  <script type="module" src="../index.js"></script>
</head>
<body>

<template>
  <style>
    my-el {
      color: red;
    }
    span { color: blue; }
  </style>
  <my-el></my-el>
  <span>sample</span>
</template>

<script type="module">
  // eslint-disable-next-line max-classes-per-file
  import { Foo } from './Foo.js';
  import { Bar } from './Bar.js';
  import {LitElement} from '../lit-element.js';
  import {html} from '../lit-html.js';
  console.log(LitElement)
  const registry1 = new CustomElementRegistry();
  const registry2 = new CustomElementRegistry();

  registry1.define('my-el', Foo);
  registry2.define('my-el', Bar);

  const createElement = registry =>
    class extends LitElement {

      createShadowRoot() {
        return this.attachShadow({ mode: 'open', customElements: registry });
      }


      render() {
        return html`<my-el></my-el>`
      }
    }

  customElements.define('my-element1', createElement(registry1));
  customElements.define('my-element2', createElement(registry2));
</script>

<my-element1></my-element1>
<my-element2></my-element2>
</body>
</html>
